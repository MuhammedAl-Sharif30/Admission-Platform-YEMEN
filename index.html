<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>منصة الامتحانات التفاعلية</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* CSS Code - Start */
        :root {
            --primary-color: #4CAF50; /* الأخضر الأساسي */
            --primary-dark: #388E3C;
            --secondary-color: #FFC107; /* الأصفر */
            --accent-color: #E91E63; /* وردي مميز للاختبارات المدفوعة */
            --text-color: #333;
            --secondary-text-color: #666;
            --background-color: #f4f7f6;
            --card-background: #ffffff;
            --border-color: #ddd;
            --light-gray: #f0f0f0;
            --dark-gray: #888;
            --light-yellow: #fffde7; /* لون خفيف للاختبارات المدفوعة */
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Cairo', sans-serif;
            outline: none;
            text-decoration: none;
        }

        html {
            font-size: 62.5%; /* 1rem = 10px */
            overflow-x: hidden;
            scroll-behavior: smooth;
        }

        body {
            background: var(--background-color);
            color: var(--text-color);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header */
        .header {
            background: var(--primary-color);
            padding: 1.5rem 7%;
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: sticky;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            box-shadow: 0 0.5rem 1.5rem rgba(0, 0, 0, 0.1);
        }

        .header .logo {
            font-size: 2.5rem;
            color: #fff;
            font-weight: bold;
        }

        .header .navbar a {
            font-size: 1.7rem;
            color: #fff;
            margin: 0 1rem;
            transition: all 0.3s ease;
        }

        .header .navbar a:hover,
        .header .navbar a.active {
            color: var(--secondary-color);
        }

        .header .icons div {
            font-size: 2.5rem;
            color: #fff;
            cursor: pointer;
            margin-left: 1.5rem;
        }

        .header .icons div:hover {
            color: var(--secondary-color);
        }

        #menu-btn {
            display: none;
        }

        /* Sidebar Navigation */
        .sidebar {
            position: fixed;
            top: 0;
            right: -30rem; /* Hidden by default */
            width: 30rem;
            height: 100vh;
            background: var(--primary-color);
            display: flex;
            flex-direction: column;
            padding-top: 6rem;
            box-shadow: -0.5rem 0 1.5rem rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            z-index: 1100;
        }

        .sidebar.active {
            right: 0;
        }

        .sidebar .close-btn {
            position: absolute;
            top: 2rem;
            left: 2rem;
            font-size: 2.5rem;
            color: #fff;
            cursor: pointer;
        }

        .sidebar a {
            font-size: 2rem;
            color: #fff;
            padding: 1.5rem 2rem;
            display: block;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }

        .sidebar a:last-child {
            border-bottom: none;
        }

        .sidebar a:hover,
        .sidebar a.active {
            background: var(--primary-dark);
            color: var(--secondary-color);
        }

        .sidebar a i {
            margin-left: 1rem;
        }

        /* Screen Container */
        .screen-container {
            flex-grow: 1;
            padding: 2rem 7%;
            position: relative; /* For z-index of screens */
            overflow-x: hidden; /* Prevent horizontal scroll */
        }

        .screen {
            min-height: calc(100vh - 8rem); /* Adjust based on header height */
            padding: 5rem 0;
            display: none; /* All screens are hidden by default */
            text-align: center;
            animation: fadeIn 0.5s ease-in-out;
            position: absolute; /* Allows screens to overlap and appear/disappear smoothly */
            top: 0;
            left: 0;
            width: 100%; /* Ensure screens take full width */
            height: 100%; /* Ensure screens take full height */
            background: var(--background-color);
            z-index: 1; /* Default z-index */
        }

        .screen.active {
            display: block; /* Only active screen is visible */
            z-index: 2; /* Active screen on top */
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section-title {
            font-size: 3.5rem;
            color: var(--primary-color);
            margin-bottom: 3rem;
            position: relative;
            padding-bottom: 1rem;
            display: inline-block; /* To allow underline effect */
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 80%;
            height: 3px;
            background-color: var(--secondary-color);
        }

        /* Home Screen */
        #mainScreen .home-content {
            max-width: 80rem;
            margin: 0 auto;
            padding-top: 5rem;
        }

        #mainScreen .home-content h1 {
            font-size: 5rem;
            color: var(--text-color);
            margin-bottom: 2rem;
            line-height: 1.2;
        }

        #mainScreen .home-content p {
            font-size: 1.8rem;
            color: var(--secondary-text-color);
            margin-bottom: 3rem;
            line-height: 1.6;
        }

        .button-group {
            display: flex;
            justify-content: center;
            gap: 2rem;
        }

        .btn {
            display: inline-block;
            padding: 1.2rem 3rem;
            background: var(--primary-color);
            color: #fff;
            font-size: 1.7rem;
            border-radius: .5rem;
            cursor: pointer;
            transition: all .3s ease;
            border: none;
        }

        .btn:hover {
            background: var(--primary-dark);
        }

        /* About Screen */
        #aboutScreen .about-content {
            max-width: 80rem;
            margin: 0 auto;
            font-size: 1.8rem;
            line-height: 1.8;
            color: var(--secondary-text-color);
            text-align: justify;
        }

        #aboutScreen .about-content p {
            margin-bottom: 1.5rem;
        }

        /* Courses Screen */
        .course-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(30rem, 1fr));
            gap: 2.5rem;
            padding: 2rem 0;
            max-width: 1200px;
            margin: 0 auto;
        }

        .course-card {
            background: var(--card-background);
            border-radius: 1rem;
            box-shadow: 0 0.5rem 1.5rem rgba(0, 0, 0, 0.1);
            padding: 3rem;
            text-align: center;
            transition: transform 0.3s ease;
        }

        .course-card:hover {
            transform: translateY(-1rem);
        }

        .course-card h3 {
            font-size: 2.5rem;
            color: var(--primary-color);
            margin-bottom: 1.5rem;
        }

        .course-card p {
            font-size: 1.6rem;
            color: var(--secondary-text-color);
            line-height: 1.7;
            margin-bottom: 2rem;
        }

        .course-card .btn {
            padding: 1rem 2.5rem;
            font-size: 1.5rem;
        }

        /* Exam Screen (Main Subjects Grid) */
        #examScreen .exam-subjects-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 20px;
            padding: 20px 0;
            max-width: 900px;
            margin: 0 auto;
        }

        .exam-subject-card {
            background-color: var(--card-background);
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 180px;
        }

        .exam-subject-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }

        .exam-subject-card img {
            max-width: 80px;
            height: auto;
            margin-bottom: 10px;
        }

        .exam-subject-card h3 {
            font-size: 2rem;
            color: var(--primary-color);
            margin: 0;
        }

        /* NEW: Subject Detail Screen, Comprehensive Exams List, Class Exams List, etc. */
        .subject-options-grid, .exams-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            padding: 20px 0;
            max-width: 900px;
            margin: 0 auto;
        }

        .subject-option-card, .exam-item-card {
            background-color: var(--card-background);
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 120px;
        }

        .subject-option-card:hover, .exam-item-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }

        .subject-option-card h3, .exam-item-card h4 {
            margin: 0;
            color: var(--primary-color);
            font-size: 2.2rem;
        }

        .exam-item-card p {
            margin-top: 5px;
            color: var(--secondary-text-color);
            font-size: 1.4rem;
        }

        .disabled-option {
            opacity: 0.6;
            cursor: not-allowed;
            background-color: var(--light-gray);
            box-shadow: none;
        }

        .disabled-option:hover {
            transform: none;
            box-shadow: none;
        }

        .disabled-option p {
            font-size: 1.4rem;
            margin-top: 5px;
            color: var(--dark-gray);
        }

        .no-data-message {
            text-align: center;
            grid-column: 1 / -1;
            color: var(--secondary-text-color);
            padding: 30px;
            font-size: 1.8rem;
        }

        .paid-exam {
            border: 2px solid var(--accent-color);
            background-color: var(--light-yellow);
        }

        .paid-exam h4 {
            color: var(--accent-color);
        }

        /* Back Button */
        .back-button {
            background-color: var(--primary-color);
            color: white;
            padding: 1.2rem 2.5rem;
            border: none;
            border-radius: 0.5rem;
            cursor: pointer;
            margin-top: 3rem;
            font-size: 1.7rem;
            transition: background-color 0.3s;
        }

        .back-button:hover {
            background-color: var(--primary-dark);
        }

        /* Quiz Screen */
        #quizScreen {
            max-width: 900px;
            margin: 0 auto;
            padding: 3rem 2rem;
            background: var(--card-background);
            border-radius: 1rem;
            box-shadow: 0 0.5rem 1.5rem rgba(0, 0, 0, 0.1);
        }

        .quiz-title {
            font-size: 3rem;
            color: var(--primary-color);
            margin-bottom: 2rem;
        }

        .quiz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 3rem;
            padding: 1.5rem;
            background-color: var(--light-gray);
            border-radius: 0.8rem;
        }

        .quiz-header .timer,
        .quiz-header .question-counter {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--text-color);
        }

        .question-container {
            text-align: right;
            margin-bottom: 3rem;
        }

        .question-container h3 {
            font-size: 2.2rem;
            color: var(--text-color);
            margin-bottom: 2rem;
            line-height: 1.6;
            unicode-bidi: isolate; /* Ensure proper direction for mixed content */
            direction: rtl; /* Set default direction to RTL */
        }

        .options-container {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .option-button {
            display: block;
            width: 100%;
            padding: 1.5rem 2rem;
            background-color: var(--light-gray);
            border: 1px solid var(--border-color);
            border-radius: 0.8rem;
            text-align: right;
            font-size: 1.8rem;
            color: var(--text-color);
            cursor: pointer;
            transition: background-color 0.3s, border-color 0.3s, transform 0.1s;
            unicode-bidi: isolate; /* Ensure proper direction for mixed content */
            direction: rtl; /* Set default direction to RTL */
        }

        .option-button:hover {
            background-color: #e0e0e0;
        }

        .option-button.selected {
            background-color: var(--primary-color);
            color: #fff;
            border-color: var(--primary-color);
        }

        .option-button.correct {
            background-color: #d4edda; /* Light green */
            border-color: #28a745; /* Darker green */
            color: #155724; /* Dark green text */
            font-weight: bold;
        }

        .option-button.wrong {
            background-color: #f8d7da; /* Light red */
            border-color: #dc3545; /* Darker red */
            color: #721c24; /* Dark red text */
            font-weight: bold;
        }

        .quiz-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 3rem;
        }

        .nav-button {
            padding: 1.2rem 2.5rem;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 0.5rem;
            cursor: pointer;
            font-size: 1.7rem;
            transition: background-color 0.3s;
        }

        .nav-button:hover {
            background-color: var(--primary-dark);
        }

        #prevBtn:disabled,
        #nextBtn:disabled,
        #finishBtn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Result Screen */
        #resultScreen {
            max-width: 900px;
            margin: 0 auto;
            padding: 3rem 2rem;
            background: var(--card-background);
            border-radius: 1rem;
            box-shadow: 0 0.5rem 1.5rem rgba(0, 0, 0, 0.1);
            text-align: right;
        }

        #resultScreen .section-title {
            text-align: center;
        }

        #resultScreen .summary {
            background-color: var(--light-gray);
            padding: 2rem;
            border-radius: 0.8rem;
            margin-bottom: 3rem;
        }

        #resultScreen .summary p {
            font-size: 1.8rem;
            color: var(--text-color);
            margin-bottom: 1rem;
        }

        #resultScreen .summary span {
            font-weight: bold;
            color: var(--primary-color);
            margin-right: 0.5rem; /* Space between value and text */
        }

        #resultScreen .review-questions .review-item {
            background-color: #f9f9f9;
            border: 1px solid var(--border-color);
            border-radius: 0.8rem;
            padding: 2rem;
            margin-bottom: 2rem;
        }

        #resultScreen .review-questions .review-item h4 {
            font-size: 2rem;
            color: var(--text-color);
            margin-bottom: 1rem;
            direction: rtl;
            unicode-bidi: isolate;
        }

        #resultScreen .review-questions .review-item .options-review {
            display: flex;
            flex-direction: column;
            gap: 0.8rem;
            margin-bottom: 1.5rem;
        }

        #resultScreen .review-questions .review-item .options-review div {
            font-size: 1.6rem;
            padding: 1rem;
            border-radius: 0.5rem;
            direction: rtl;
            unicode-bidi: isolate;
        }

        #resultScreen .review-questions .review-item .explanation {
            background-color: #e6f7ff; /* Light blue */
            border: 1px solid #91d5ff; /* Blue border */
            padding: 1.5rem;
            border-radius: 0.5rem;
            font-size: 1.5rem;
            color: #0050b3; /* Dark blue text */
            direction: rtl;
            unicode-bidi: isolate;
        }

        .back-to-home-button {
            background-color: var(--secondary-color);
            color: var(--text-color);
            padding: 1.2rem 2.5rem;
            border: none;
            border-radius: 0.5rem;
            cursor: pointer;
            margin-top: 3rem;
            font-size: 1.7rem;
            transition: background-color 0.3s;
        }

        .back-to-home-button:hover {
            background-color: #ffda6a;
        }

        /* Contact Screen */
        #contactScreen {
            max-width: 800px;
            margin: 0 auto;
            padding: 3rem 2rem;
        }

        #contactScreen .contact-content {
            font-size: 1.8rem;
            line-height: 1.8;
            color: var(--secondary-text-color);
            text-align: right;
            margin-bottom: 3rem;
        }

        #contactScreen .contact-content ul {
            list-style: none;
            padding: 0;
            margin-top: 2rem;
        }

        #contactScreen .contact-content ul li {
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            direction: rtl;
        }

        #contactScreen .contact-content ul li i {
            margin-left: 1rem;
            color: var(--primary-color);
            font-size: 2rem;
        }

        .contact-form {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        .contact-form .box {
            width: 100%;
            padding: 1.5rem;
            font-size: 1.6rem;
            color: var(--text-color);
            border: 1px solid var(--border-color);
            border-radius: 0.5rem;
            background: var(--light-gray);
        }

        .contact-form textarea {
            resize: vertical;
            min-height: 15rem;
        }

        .contact-form .btn {
            align-self: flex-end;
        }

        /* Account Form */
        .account-form {
            position: fixed;
            top: 0;
            right: -105%; /* Hidden by default */
            background: #fff;
            border-left: 0.5rem solid var(--primary-color);
            width: 35rem;
            height: 100vh;
            z-index: 1200;
            padding: 3rem;
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
            transition: right 0.3s ease;
        }

        .account-form.active {
            right: 0;
        }

        .account-form #close-form {
            position: absolute;
            top: 2rem;
            left: 2rem;
            font-size: 3rem;
            color: var(--text-color);
            cursor: pointer;
        }

        .account-form .buttons {
            display: flex;
            background: var(--light-gray);
            border-radius: 0.5rem;
            margin-bottom: 2rem;
        }

        .account-form .buttons .btn {
            flex: 1;
            margin: 0.5rem;
            font-size: 1.6rem;
            padding: 1rem;
            background: none;
            color: var(--text-color);
        }

        .account-form .buttons .btn.active {
            background: var(--primary-color);
            color: #fff;
        }

        .account-form form {
            display: none;
            padding: 2rem;
        }

        .account-form form.active {
            display: block;
        }

        .account-form form h3 {
            font-size: 2.5rem;
            color: var(--text-color);
            margin-bottom: 2rem;
        }

        .account-form form .box {
            width: 100%;
            margin: 1.5rem 0;
            padding: 1.5rem;
            font-size: 1.6rem;
            color: var(--text-color);
            border: 1px solid var(--border-color);
            border-radius: 0.5rem;
        }

        .account-form form .flex {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
            direction: rtl;
        }

        .account-form form .flex label {
            font-size: 1.5rem;
            color: var(--secondary-text-color);
            margin: 0; /* Remove default margin */
        }

        .account-form form .flex a {
            font-size: 1.5rem;
            color: var(--primary-color);
            margin-right: auto;
        }

        .account-form form .btn {
            width: 100%;
        }

        /* Testimonials Slider (if you decide to enable it) */
        .testimonials-section {
            padding: 5rem 0;
            background: var(--background-color);
        }

        .testimonials-slider {
            display: flex;
            overflow: hidden;
            position: relative;
            max-width: 800px;
            margin: 0 auto 3rem;
            border-radius: 1rem;
            box-shadow: 0 0.5rem 1.5rem rgba(0, 0, 0, 0.1);
        }

        .testimonial-item {
            min-width: 100%;
            flex-shrink: 0;
            padding: 4rem;
            text-align: center;
            background: var(--card-background);
            display: none;
            flex-direction: column;
            align-items: center;
            transition: transform 0.5s ease-in-out;
        }

        .testimonial-item.active {
            display: flex;
        }

        .testimonial-item img {
            width: 10rem;
            height: 10rem;
            border-radius: 50%;
            object-fit: cover;
            margin-bottom: 2rem;
            border: 0.5rem solid var(--primary-color);
        }

        .testimonial-item h3 {
            font-size: 2.5rem;
            color: var(--primary-color);
            margin-bottom: 1rem;
        }

        .testimonial-item p {
            font-size: 1.8rem;
            color: var(--secondary-text-color);
            line-height: 1.7;
        }

        .slider-nav {
            display: flex;
            justify-content: center;
            gap: 1rem;
        }

        .slider-nav .dot {
            width: 1.2rem;
            height: 1.2rem;
            background-color: var(--border-color);
            border-radius: 50%;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .slider-nav .dot.active {
            background-color: var(--primary-color);
        }


        /* Media Queries for Responsiveness */
        @media (max-width: 991px) {
            html {
                font-size: 55%;
            }
            .header {
                padding: 1.5rem 2rem;
            }
            .screen-container {
                padding: 2rem;
            }
        }

        @media (max-width: 768px) {
            #menu-btn {
                display: inline-block;
            }
            .header .navbar {
                position: fixed;
                top: 6.5rem;
                right: -100%;
                background: #fff;
                width: 30rem;
                height: calc(100vh - 6.5rem);
                box-shadow: 0 0.5rem 1.5rem rgba(0, 0, 0, 0.1);
                display: flex;
                flex-direction: column;
                transition: right 0.3s ease;
            }
            .header .navbar.active {
                right: 0;
            }
            .header .navbar a {
                color: var(--text-color);
                display: block;
                margin: 1.5rem;
                padding: 1rem;
                font-size: 2rem;
            }
            .header .navbar a:hover,
            .header .navbar a.active {
                background: var(--light-gray);
                border-radius: 0.5rem;
                color: var(--primary-color);
            }

            .exam-subject-card, .subject-option-card, .exam-item-card {
                min-height: 100px; /* Adjust for smaller screens */
                padding: 15px;
            }
            .exam-subject-card img {
                max-width: 60px;
            }
            .exam-subject-card h3, .subject-option-card h3, .exam-item-card h4 {
                font-size: 1.8rem;
            }
            .back-button, .btn, .nav-button, .back-to-home-button {
                padding: 1rem 2rem;
                font-size: 1.5rem;
            }
            .quiz-header .timer, .quiz-header .question-counter {
                font-size: 1.6rem;
            }
            .question-container h3 {
                font-size: 2rem;
            }
            .option-button {
                font-size: 1.6rem;
                padding: 1.2rem 1.5rem;
            }
        }

        @media (max-width: 450px) {
            html {
                font-size: 50%;
            }
            .header .logo {
                font-size: 2rem;
            }
            .header .icons div {
                margin-left: 1rem;
                font-size: 2.2rem;
            }
            .home-content h1 {
                font-size: 3.5rem;
            }
            .home-content p {
                font-size: 1.6rem;
            }
            .button-group {
                flex-direction: column;
                gap: 1.5rem;
            }
            .btn {
                width: 80%;
                margin: 0 auto;
            }
            .section-title {
                font-size: 3rem;
            }
            .account-form {
                width: 100%;
                border-left: none;
            }
            .quiz-navigation {
                flex-direction: column;
                gap: 1.5rem;
            }
            .nav-button {
                width: 100%;
            }
        }

        /* Ensure proper RTL for mixed content elements if needed, though unicode-bidi and dir should handle most */
        .quiz-header .timer,
        .quiz-header .question-counter,
        .summary p,
        .summary span,
        .review-questions .review-item .options-review div,
        .review-questions .review-item .explanation {
            direction: rtl; /* Explicitly set for these elements */
            unicode-bidi: embed; /* Default for embedding, isolate for isolated numbers/text */
        }
        /* CSS Code - End */
    </style>
</head>
<body>
    <header class="header">
        <a href="#" class="logo">EduPlatform</a>
        <nav class="navbar">
            <a href="#home" class="nav-link active" data-screen-id="mainScreen">الرئيسية</a>
            <a href="#about" class="nav-link" data-screen-id="aboutScreen">عنا</a>
            <a href="#courses" class="nav-link" data-screen-id="coursesScreen">الدورات</a>
            <a href="#exam" class="nav-link" data-screen-id="examScreen">الاختبارات</a>
            <a href="#contact" class="nav-link" data-screen-id="contactScreen">تواصل معنا</a>
        </nav>
        <div class="icons">
            <div id="account-btn" class="fas fa-user"></div>
            <div id="menu-btn" class="fas fa-bars"></div>
        </div>
    </header>

    <div class="sidebar">
        <div class="close-btn fas fa-times" id="close-sidebar"></div>
        <a href="#home" class="nav-link" data-screen-id="mainScreen"><i class="fas fa-home"></i> الرئيسية</a>
        <a href="#about" class="nav-link" data-screen-id="aboutScreen"><i class="fas fa-info-circle"></i> عنا</a>
        <a href="#courses" class="nav-link" data-screen-id="coursesScreen"><i class="fas fa-graduation-cap"></i> الدورات</a>
        <a href="#exam" class="nav-link" data-screen-id="examScreen"><i class="fas fa-file-alt"></i> الاختبارات</a>
        <a href="#contact" class="nav-link" data-screen-id="contactScreen"><i class="fas fa-envelope"></i> تواصل معنا</a>
    </div>

    <div class="screen-container">

        <section class="screen active" id="mainScreen">
            <div class="home-content">
                <h1>مرحباً بك في منصة EduPlatform التعليمية!</h1>
                <p>تعلّم بذكاء، اختبر قدراتك، وتفوق في دراستك.</p>
                <div class="button-group">
                    <button class="btn" onclick="showScreen('coursesScreen')">استكشف الدورات</button>
                    <button class="btn" onclick="showScreen('examScreen')">ابدأ الاختبار</button>
                </div>
            </div>
            <section class="testimonials-section" style="display: none;">
                <h2 class="section-title">ماذا يقول طلابنا</h2>
                <div class="testimonials-slider">
                    <div class="testimonial-item active">
                        <img src="https://via.placeholder.com/80" alt="صورة الطالب">
                        <h3>أحمد محمود</h3>
                        <p>"المنصة غيرت طريقة دراستي تمامًا. الشروحات واضحة والاختبارات تفاعلية!"</p>
                    </div>
                    <div class="testimonial-item">
                        <img src="https://via.placeholder.com/80" alt="صورة الطالبة">
                        <h3>فاطمة علي</h3>
                        <p>"أفضل مكان للتحضير للامتحانات، والنتائج تظهر فورًا مع الشرح."</p>
                    </div>
                    <div class="testimonial-item">
                        <img src="https://via.placeholder.com/80" alt="صورة الطالب">
                        <h3>محمد خالد</h3>
                        <p>"الموقع سهل الاستخدام ويحتوي على كم هائل من المعلومات المفيدة."</p>
                    </div>
                </div>
                <div class="slider-nav">
                    <span class="dot active"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                </div>
            </section>
        </section>

        <section class="screen" id="aboutScreen">
            <h2 class="section-title">عنا</h2>
            <div class="about-content">
                <p>منصة EduPlatform هي وجهتك الأولى للتعلم التفاعلي والتحضير للاختبارات. نؤمن بأن التعليم يجب أن يكون متاحًا وممتعًا للجميع. نقدم مجموعة واسعة من الدورات والاختبارات لمساعدتك على التفوق الأكاديمي.</p>
                <p>فريقنا مكون من معلمين وخبراء في تطوير التعليم، ملتزمون بتقديم أفضل تجربة تعليمية ممكنة.</p>
            </div>
        </section>

        <section class="screen" id="coursesScreen">
            <h2 class="section-title">دوراتنا</h2>
            <div class="course-grid">
                <div class="course-card">
                    <h3>دورة الأحياء الشاملة</h3>
                    <p>شرح مفصل لجميع فصول الأحياء مع تمارين تفاعلية.</p>
                    <button class="btn" onclick="alert('سيبدأ التسجيل في دورة الأحياء قريباً!')">سجل الآن</button>
                </div>
                <div class="course-card">
                    <h3>أساسيات الكيمياء</h3>
                    <p>تعلم الكيمياء من الصفر حتى الاحتراف.</p>
                    <button class="btn" onclick="alert('سيبدأ التسجيل في دورة الكيمياء قريباً!')">سجل الآن</button>
                </div>
                <div class="course-card">
                    <h3>الفيزياء للمتقدمين</h3>
                    <p>دورة متقدمة في الفيزياء لحل المسائل المعقدة.</p>
                    <button class="btn" onclick="alert('سيبدأ التسجيل في دورة الفيزياء قريباً!')">سجل الآن</button>
                </div>
            </div>
        </section>

        <section class="screen" id="examScreen">
            <h2 class="section-title">الاختبارات</h2>
            <div class="exam-subjects-grid">
                </div>
        </section>

        <section class="screen" id="subjectDetailScreen">
            <h2 class="section-title" id="subjectDetailTitle"></h2>
            <div class="subject-options-grid">
                <div class="subject-option-card" onclick="showComprehensiveExams()">
                    <h3>اختبارات <span id="currentSubjectNameComprehensive"></span> الشاملة</h3>
                </div>
                <div class="subject-option-card" onclick="showClassBasedExams()">
                    <h3>اختبارات <span id="currentSubjectNameClassBased"></span> حسب الصف</h3>
                </div>
                <div class="subject-option-card disabled-option">
                    <h3>قريباً...</h3>
                    <p>المزيد من الخيارات ستتوفر قريباً.</p>
                </div>
            </div>
            <button class="back-button" onclick="showScreen('examScreen')">العودة للمواد</button>
        </section>

        <section class="screen" id="comprehensiveExamsListScreen">
            <h2 class="section-title" id="comprehensiveExamsListTitle"></h2>
            <div class="exams-list" id="comprehensiveExamsContainer">
                </div>
            <button class="back-button" onclick="showScreen('subjectDetailScreen')">العودة للخلف</button>
        </section>

        <section class="screen" id="classExamsListScreen">
            <h2 class="section-title" id="classExamsListTitle"></h2>
            <div class="exams-list" id="classExamsContainer">
                </div>
            <button class="back-button" onclick="showScreen('subjectDetailScreen')">العودة للخلف</button>
        </section>

        <section class="screen" id="classOptionsScreen">
            <h2 class="section-title" id="classOptionsTitle"></h2>
            <div class="subject-options-grid">
                <div class="subject-option-card" onclick="showComprehensiveExamForClass()">
                    <h3>اختبار شامل لمادة <span id="currentSubjectNameClassComprehensive"></span> للصف <span id="currentClassNameComprehensive"></span></h3>
                </div>
                <div class="subject-option-card" onclick="showChapterBasedExams()">
                    <h3>اختبارات <span id="currentSubjectNameChapterBased"></span> حسب الفصول</h3>
                </div>
            </div>
            <button class="back-button" onclick="showClassBasedExams()">العودة للخلف</button>
        </section>

        <section class="screen" id="chapterExamsListScreen">
            <h2 class="section-title" id="chapterExamsListTitle"></h2>
            <div class="exams-list" id="chapterExamsContainer">
                </div>
            <button class="back-button" onclick="showClassOptionsScreen()">العودة للخلف</button>
        </section>

        <section class="screen" id="chapterExamsScreen">
            <h2 class="section-title" id="chapterExamsTitle"></h2>
            <div class="exams-list" id="chapterSpecificExamsContainer">
                </div>
            <button class="back-button" onclick="showChapterBasedExams()">العودة للخلف</button>
        </section>

        <section class="screen" id="quizScreen">
            <h2 class="quiz-title" id="quizTitle"></h2>
            <div class="quiz-header">
                <div class="timer">الوقت المتبقي: <span id="timeLeft">00:00</span></div>
                <div class="question-counter">السؤال <span id="currentQuestionNumber"></span> من <span id="totalQuestions"></span></div>
            </div>
            <div class="question-container">
                <h3 id="questionText"></h3>
                <div class="options-container" id="optionsContainer"></div>
            </div>
            <div class="quiz-navigation">
                <button id="prevBtn" class="nav-button" onclick="prevQuestion()">السابق</button>
                <button id="nextBtn" class="nav-button" onclick="nextQuestion()">التالي</button>
                <button id="finishBtn" class="nav-button" onclick="showResultScreen()">إنهاء الاختبار</button>
            </div>
        </section>

        <section class="screen" id="resultScreen">
            <h2 class="section-title">نتائج الاختبار</h2>
            <div class="summary">
                <p>الأسئلة الصحيحة: <span id="correctAnswers"></span></p>
                <p>الأسئلة الخاطئة: <span id="wrongAnswers"></span></p>
                <p>الأسئلة التي لم يجب عليها: <span id="skippedAnswers"></span></p>
            </div>
            <div class="review-questions" id="reviewQuestionsContainer">
                </div>
            <button class="back-to-home-button" onclick="showScreen('examScreen')">العودة إلى الاختبارات</button>
        </section>

        <section class="screen" id="contactScreen">
            <h2 class="section-title">تواصل معنا</h2>
            <div class="contact-content">
                <p>يمكنك التواصل معنا عبر:</p>
                <ul>
                    <li><i class="fas fa-envelope"></i> البريد الإلكتروني: info@eduplatform.com</li>
                    <li><i class="fas fa-phone"></i> الهاتف: +967 770 000 000</li>
                    <li><i class="fas fa-map-marker-alt"></i> العنوان: صنعاء، اليمن</li>
                </ul>
                <form action="#" method="POST" class="contact-form">
                    <input type="text" name="name" placeholder="اسمك" required>
                    <input type="email" name="email" placeholder="بريدك الإلكتروني" required>
                    <textarea name="message" placeholder="رسالتك" required></textarea>
                    <button type="submit" class="btn">إرسال</button>
                </form>
            </div>
        </section>
    </div>

    <div class="account-form">
        <div id="close-form" class="fas fa-times"></div>
        <div class="buttons">
            <span class="btn active login-btn">تسجيل الدخول</span>
            <span class="btn register-btn">إنشاء حساب</span>
        </div>
        <form class="login-form active">
            <h3>تسجيل الدخول</h3>
            <input type="email" placeholder="البريد الإلكتروني" class="box">
            <input type="password" placeholder="كلمة المرور" class="box">
            <div class="flex">
                <input type="checkbox" name="" id="remember-me">
                <label for="remember-me">تذكرني</label>
                <a href="#">نسيت كلمة المرور؟</a>
            </div>
            <input type="submit" value="تسجيل الدخول" class="btn">
        </form>
        <form class="register-form">
            <h3>إنشاء حساب</h3>
            <input type="email" placeholder="البريد الإلكتروني" class="box">
            <input type="password" placeholder="كلمة المرور" class="box">
            <input type="password" placeholder="تأكيد كلمة المرور" class="box">
            <input type="submit" value="إنشاء حساب" class="btn">
        </form>
    </div>

    <script>
        // JavaScript Code - Start
        document.addEventListener('DOMContentLoaded', () => {
            // Global variables for screen management
            const screens = document.querySelectorAll('.screen');
            const navLinks = document.querySelectorAll('.nav-link');
            const sidebar = document.querySelector('.sidebar');
            const menuBtn = document.getElementById('menu-btn');
            const closeSidebarBtn = document.getElementById('close-sidebar');
            const accountBtn = document.getElementById('account-btn');
            const accountForm = document.querySelector('.account-form');
            const closeAccountFormBtn = document.getElementById('close-form');
            const loginBtn = document.querySelector('.login-btn');
            const registerBtn = document.querySelector('.register-btn');
            const loginForm = document.querySelector('.login-form');
            const registerForm = document.querySelector('.register-form');

            // Quiz Global Variables
            let activeQuestions = [];
            let currentQuestionIndex = 0;
            let userAnswers = [];
            let timeLeft = 0;
            let timerInterval;

            // Global variables for exam navigation state
            let currentSubjectId = '';
            let currentSubjectName = '';
            let currentClassId = '';
            let currentClassName = '';
            let currentChapterId = '';
            let currentChapterName = '';

            // ====== Data Structures for Exams (YOU NEED TO FILL THESE!) ======
            // Example: quizDataBiologyComp1 and quizDataChemistryComp1 are defined below
            // You must create a new object like quizDataBiologyComp1 for each 'link' you specify here.

            const examSubjects = [
                { id: 'biology', name: 'الأحياء', image: 'https://via.placeholder.com/80/4CAF50/FFFFFF?text=Bio' }, // Replace with actual image path if needed
                { id: 'chemistry', name: 'الكيمياء', image: 'https://via.placeholder.com/80/FFC107/333333?text=Chem' }, // Replace with actual image path if needed
                { id: 'physics', name: 'الفيزياء', image: 'https://via.placeholder.com/80/E91E63/FFFFFF?text=Phys' }, // Replace with actual image path if needed
                { id: 'math', name: 'الرياضيات', image: 'https://via.placeholder.com/80/00BCD4/FFFFFF?text=Math' }, // Replace with actual image path if needed
                { id: 'arabic', name: 'اللغة العربية', image: 'https://via.placeholder.com/80/9C27B0/FFFFFF?text=Ar' }, // Replace with actual image path if needed
                { id: 'english', name: 'اللغة الإنجليزية', image: 'https://via.placeholder.com/80/3F51B5/FFFFFF?text=Eng' }, // Replace with actual image path if needed
                // أضف المزيد من المواد هنا بنفس النمط (غير الـ id والـ name والـ image)
            ];

            const comprehensiveExamsBySubject = {
                'biology': [
                    { id: 'bio-comp-1', name: 'اختبار شامل 1 (أحياء)', type: 'مجاني', link: 'quizDataBiologyComp1' },
                    { id: 'bio-comp-2', name: 'اختبار شامل 2 (أحياء)', type: 'مدفوع', link: 'quizDataBiologyComp2' },
                    // أضف المزيد من الاختبارات الشاملة للأحياء هنا (غير الـ id والـ name والـ type والـ link)
                ],
                'chemistry': [
                    { id: 'chem-comp-1', name: 'اختبار شامل 1 (كيمياء)', type: 'مجاني', link: 'quizDataChemistryComp1' },
                    // أضف المزيد من الاختبارات الشاملة للكيمياء
                ],
                // أضف مواد أخرى هنا
            };

            const classesBySubject = {
                'biology': [
                    { id: 'class-1-secondary', name: 'الأول الثانوي' },
                    { id: 'class-2-secondary', name: 'الثاني الثانوي' },
                    { id: 'class-3-secondary', name: 'الثالث الثانوي' },
                ],
                'chemistry': [
                    { id: 'class-1-secondary', name: 'الأول الثانوي' },
                    { id: 'class-2-secondary', name: 'الثاني الثانوي' },
                ],
                // أضف مواد أخرى هنا
            };

            const comprehensiveExamsByClassAndSubject = {
                'biology': { // داخل مادة الأحياء
                    'class-1-secondary': [ // لـ "الأول الثانوي"
                        { id: 'bio-class1-comp', name: 'اختبار شامل أحياء - أول ثانوي', type: 'مجاني', link: 'quizDataBioClass1Comp' },
                    ],
                    'class-2-secondary': [ // لـ "الثاني الثانوي"
                        { id: 'bio-class2-comp', name: 'اختبار شامل أحياء - ثاني ثانوي', type: 'مدفوع', link: 'quizDataBioClass2Comp' },
                    ],
                },
                // أضف مواد وصفوف أخرى هنا
            };

            const chaptersByClassAndSubject = {
                'biology': { // داخل مادة الأحياء
                    'class-1-secondary': [ // لـ "الأول الثانوي"
                        { id: 'chapter-1', name: 'الفصل الأول: أساسيات الأحياء' },
                        { id: 'chapter-2', name: 'الفصل الثاني: الخلية' },
                    ],
                    'class-2-secondary': [ // لـ "الثاني الثانوي"
                        { id: 'chapter-3', name: 'الفصل الثالث: الوراثة' },
                    ],
                },
                // أضف مواد وصفوف أخرى هنا
            };

            const examsByChapterAndClassAndSubject = {
                'biology': { // داخل مادة الأحياء
                    'class-1-secondary': { // لـ "الأول الثانوي"
                        'chapter-1': [ // لـ "الفصل الأول"
                            { id: 'bio-ch1-exam1', name: 'اختبار الفصل الأول 1 (أحياء)', type: 'مجاني', link: 'quizDataBioCh1Exam1' },
                            { id: 'bio-ch1-exam2', name: 'اختبار الفصل الأول 2 (أحياء)', type: 'مدفوع', link: 'quizDataBioCh1Exam2' },
                        ],
                        'chapter-2': [ // لـ "الفصل الثاني"
                            { id: 'bio-ch2-exam1', name: 'اختبار الفصل الثاني 1 (أحياء)', type: 'مجاني', link: 'quizDataBioCh2Exam1' },
                        ],
                    },
                },
                // أضف مواد وصفوف وفصول أخرى هنا
            };

            // ====== Actual Quiz Data (YOU NEED TO FILL THESE WITH YOUR QUESTIONS!) ======
            // Make sure the 'link' in the data structures above matches these variable names.
            // Each 'quizDataXXX' should be an array of question objects.

            const quizDataBiologyComp1 = [
                {
                    question: "ما هو الكائن الحي الذي يقوم بعملية البناء الضوئي؟",
                    options: ["الأسد", "الإنسان", "النبات", "السمكة"],
                    answer: "النبات",
                    explanation: "النباتات هي الكائنات الوحيدة التي تقوم بعملية البناء الضوئي لإنتاج غذائها."
                },
                {
                    question: "ما هو الجزء المسؤول عن تنظيم دخول وخروج المواد من وإلى الخلية؟",
                    options: ["النواة", "الميتوكوندريا", "الغشاء الخلوي", "الشبكة الإندوبلازمية"],
                    answer: "الغشاء الخلوي",
                    explanation: "الغشاء الخلوي هو الحاجز الذي يتحكم في حركة المواد عبر الخلية."
                },
                // ... أضف المزيد من الأسئلة لهذا الاختبار
            ];

            const quizDataBiologyComp2 = [
                {
                    question: "أي من التالي ليس من أقسام النبات الرئيسية؟",
                    options: ["الجذر", "الساق", "الزهرة", "القلب"],
                    answer: "القلب",
                    explanation: "القلب ليس جزءًا من تركيب النبات."
                },
                // ... أضف المزيد من الأسئلة لهذا الاختبار (اختبار مدفوع)
            ];

            const quizDataChemistryComp1 = [
                {
                    question: "ما هو الرمز الكيميائي للماء؟",
                    options: ["O2", "H2O", "CO2", "N2"],
                    answer: "H2O",
                    explanation: "يتكون الماء من ذرتي هيدروجين وذرة أكسجين."
                },
                {
                    question: "ما هو العنصر الأكثر وفرة في الغلاف الجوي للأرض؟",
                    options: ["الأكسجين", "النيتروجين", "ثاني أكسيد الكربون", "الأرغون"],
                    answer: "النيتروجين",
                    explanation: "يشكل النيتروجين حوالي 78% من الغلاف الجوي للأرض."
                },
                // ... أضف المزيد من الأسئلة لهذا الاختبار
            ];

            const quizDataBioClass1Comp = [
                {
                    question: "ما هي الوحدة الأساسية للحياة؟",
                    options: ["الذرة", "الجزيء", "الخلية", "النسيج"],
                    answer: "الخلية",
                    explanation: "الخلية هي أصغر وحدة بنائية ووظيفية في الكائنات الحية."
                },
                // ... أضف المزيد من الأسئلة لهذا الاختبار
            ];

            const quizDataBioClass2Comp = [
                {
                    question: "ما هو اسم العملية التي تنتج فيها النباتات الغذاء باستخدام ضوء الشمس؟",
                    options: ["التنفس الخلوي", "التركيب الضوئي", "التخمر", "النقل النشط"],
                    answer: "التركيب الضوئي",
                    explanation: "التركيب الضوئي (أو البناء الضوئي) هو العملية التي تحول بها النباتات طاقة الضوء إلى طاقة كيميائية."
                },
                // ... أضف المزيد من الأسئلة لهذا الاختبار
            ];

            const quizDataBioCh1Exam1 = [
                {
                    question: "أي من المستويات التنظيمية التالية هو الأقل تعقيدًا؟",
                    options: ["النظام البيئي", "الجماعة", "المجتمع", "الكائن الحي"],
                    answer: "الكائن الحي",
                    explanation: "الكائن الحي هو المستوى الأبسط الذي يليه مستويات أكثر تعقيدًا مثل الجماعة والمجتمع والنظام البيئي."
                },
                // ... أضف المزيد من الأسئلة لهذا الاختبار
            ];

            const quizDataBioCh1Exam2 = [
                {
                    question: "ماذا يدرس علم الأحياء؟",
                    options: ["الصخور", "النجوم", "الكائنات الحية", "الأنهار"],
                    answer: "الكائنات الحية",
                    explanation: "علم الأحياء هو العلم الذي يدرس الكائنات الحية وتفاعلاتها."
                },
                // ... أضف المزيد من الأسئلة لهذا الاختبار
            ];

            const quizDataBioCh2Exam1 = [
                {
                    question: "ما هو السائل الهلامي الذي يملأ الخلية ويحتوي على العضيات؟",
                    options: ["النواة", "الميتوكوندريا", "السيتوبلازم", "الكروموسومات"],
                    answer: "السيتوبلازم",
                    explanation: "السيتوبلازم هو المادة الهلامية التي تملأ الخلية وتحتوي على جميع العضيات ما عدا النواة."
                },
                // ... أضف المزيد من الأسئلة لهذا الاختبار
            ];


            // ====== General Screen Management Functions ======

            window.showScreen = function(screenId) {
                screens.forEach(screen => {
                    screen.classList.remove('active');
                });
                document.getElementById(screenId).classList.add('active');

                // Update active class for nav links
                navLinks.forEach(link => {
                    link.classList.remove('active');
                    if (link.dataset.screenId === screenId) {
                        link.classList.add('active');
                    }
                });

                // Hide sidebar and account form when navigating
                sidebar.classList.remove('active');
                accountForm.classList.remove('active');
            }

            // Event listeners for navigation links (sidebar and header)
            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    const screenId = link.dataset.screenId;
                    if (screenId) {
                        e.preventDefault(); // Prevent default anchor behavior
                        showScreen(screenId);
                    }
                });
            });

            // Sidebar Toggle
            menuBtn.addEventListener('click', () => {
                sidebar.classList.add('active');
            });

            closeSidebarBtn.addEventListener('click', () => {
                sidebar.classList.remove('active');
            });

            // Account Form Toggle
            accountBtn.addEventListener('click', () => {
                accountForm.classList.add('active');
            });

            closeAccountFormBtn.addEventListener('click', () => {
                accountForm.classList.remove('active');
            });

            // Account Form Login/Register Toggle
            loginBtn.addEventListener('click', () => {
                loginBtn.classList.add('active');
                registerBtn.classList.remove('active');
                loginForm.classList.add('active');
                registerForm.classList.remove('active');
            });

            registerBtn.addEventListener('click', () => {
                registerBtn.classList.add('active');
                loginBtn.classList.remove('active');
                registerForm.classList.add('active');
                loginForm.classList.remove('active');
            });

            // ====== NEW Exam Navigation Functions ======

            // Loads subject cards into the main exam screen
            function loadExamSubjects() {
                const examSubjectsGrid = document.querySelector('#examScreen .exam-subjects-grid');
                examSubjectsGrid.innerHTML = ''; // Clear previous content

                examSubjects.forEach(subject => {
                    const subjectCard = document.createElement('div');
                    subjectCard.className = 'exam-subject-card';
                    subjectCard.setAttribute('data-subject-id', subject.id);
                    subjectCard.onclick = () => showSubjectDetail(subject.id, subject.name);

                    subjectCard.innerHTML = `
                        <img src="${subject.image}" alt="${subject.name}">
                        <h3>${subject.name}</h3>
                    `;
                    examSubjectsGrid.appendChild(subjectCard);
                });
            }

            // Displays the subject detail screen (Comprehensive, Class-based, Coming Soon)
            window.showSubjectDetail = function(subjectId, subjectName) {
                currentSubjectId = subjectId;
                currentSubjectName = subjectName;

                document.getElementById('subjectDetailTitle').textContent = `اختبارات ${subjectName}`;
                document.getElementById('currentSubjectNameComprehensive').textContent = subjectName;
                document.getElementById('currentSubjectNameClassBased').textContent = subjectName;

                showScreen('subjectDetailScreen');
            }

            // Displays the list of comprehensive exams for the current subject
            window.showComprehensiveExams = function() {
                document.getElementById('comprehensiveExamsListTitle').textContent = `اختبارات ${currentSubjectName} الشاملة`;
                const container = document.getElementById('comprehensiveExamsContainer');
                container.innerHTML = '';

                const exams = comprehensiveExamsBySubject[currentSubjectId] || [];

                if (exams.length === 0) {
                    container.innerHTML = '<p class="no-data-message">لا توجد اختبارات شاملة متاحة حاليًا لهذه المادة.</p>';
                } else {
                    exams.forEach(exam => {
                        const examCard = document.createElement('div');
                        examCard.className = 'exam-item-card';
                        if (exam.type === 'مدفوع') {
                            examCard.classList.add('paid-exam');
                        }
                        examCard.onclick = () => startExam(exam.link, exam.name);

                        examCard.innerHTML = `
                            <h4>${exam.name}</h4>
                            <p>النوع: ${exam.type}</p>
                        `;
                        container.appendChild(examCard);
                    });
                }
                showScreen('comprehensiveExamsListScreen');
            }

            // Displays the list of classes for the current subject
            window.showClassBasedExams = function() {
                document.getElementById('classExamsListTitle').textContent = `اختبارات ${currentSubjectName} حسب الصف`;
                const container = document.getElementById('classExamsContainer');
                container.innerHTML = '';

                const classes = classesBySubject[currentSubjectId] || [];

                if (classes.length === 0) {
                    container.innerHTML = '<p class="no-data-message">لا توجد صفوف متاحة حاليًا لهذه المادة.</p>';
                } else {
                    classes.forEach(_class => {
                        const classCard = document.createElement('div');
                        classCard.className = 'exam-item-card';
                        classCard.onclick = () => showClassOptions(_class.id, _class.name);

                        classCard.innerHTML = `<h4>${_class.name}</h4>`;
                        container.appendChild(classCard);
                    });
                }
                showScreen('classExamsListScreen');
            }

            // Displays options after a class is selected (Comprehensive for class, Chapter-based)
            window.showClassOptions = function(classId, className) {
                currentClassId = classId;
                currentClassName = className;

                document.getElementById('classOptionsTitle').textContent = `${currentSubjectName} - ${className}`;
                document.getElementById('currentSubjectNameClassComprehensive').textContent = currentSubjectName;
                document.getElementById('currentClassNameComprehensive').textContent = className;
                document.getElementById('currentSubjectNameChapterBased').textContent = currentSubjectName;

                showScreen('classOptionsScreen');
            }

            // Starts the comprehensive exam for the selected class
            window.showComprehensiveExamForClass = function() {
                const exams = (comprehensiveExamsByClassAndSubject[currentSubjectId] && comprehensiveExamsByClassAndSubject[currentSubjectId][currentClassId]) || [];

                if (exams.length > 0) {
                    // Assuming there's one comprehensive exam per class or taking the first one
                    startExam(exams[0].link, exams[0].name);
                } else {
                    alert('لا يوجد اختبار شامل متاح لهذا الصف حاليًا.');
                }
            }

            // Displays the list of chapters for the current class
            window.showChapterBasedExams = function() {
                document.getElementById('chapterExamsListTitle').textContent = `${currentSubjectName} - ${currentClassName} - حسب الفصول`;
                const container = document.getElementById('chapterExamsContainer');
                container.innerHTML = '';

                const chapters = (chaptersByClassAndSubject[currentSubjectId] && chaptersByClassAndSubject[currentSubjectId][currentClassId]) || [];

                if (chapters.length === 0) {
                    container.innerHTML = '<p class="no-data-message">لا توجد فصول متاحة حاليًا لهذا الصف.</p>';
                } else {
                    chapters.forEach(chapter => {
                        const chapterCard = document.createElement('div');
                        chapterCard.className = 'exam-item-card';
                        chapterCard.onclick = () => showChapterExams(chapter.id, chapter.name);

                        chapterCard.innerHTML = `<h4>${chapter.name}</h4>`;
                        container.appendChild(chapterCard);
                    });
                }
                showScreen('chapterExamsListScreen');
            }

            // Displays the list of exams for the selected chapter
            window.showChapterExams = function(chapterId, chapterName) {
                currentChapterId = chapterId;
                currentChapterName = chapterName;

                document.getElementById('chapterExamsTitle').textContent = `${currentSubjectName} - ${currentClassName} - ${chapterName}`;
                const container = document.getElementById('chapterSpecificExamsContainer');
                container.innerHTML = '';

                const exams = (examsByChapterAndClassAndSubject[currentSubjectId] &&
                               examsByChapterAndClassAndSubject[currentSubjectId][currentClassId] &&
                               examsByChapterAndClassAndSubject[currentSubjectId][currentClassId][currentChapterId]) || [];

                if (exams.length === 0) {
                    container.innerHTML = '<p class="no-data-message">لا توجد اختبارات متاحة حاليًا لهذا الفصل.</p>';
                } else {
                    exams.forEach(exam => {
                        const examCard = document.createElement('div');
                        examCard.className = 'exam-item-card';
                        if (exam.type === 'مدفوع') {
                            examCard.classList.add('paid-exam');
                        }
                        examCard.onclick = () => startExam(exam.link, exam.name);

                        examCard.innerHTML = `
                            <h4>${exam.name}</h4>
                            <p>النوع: ${exam.type}</p>
                        `;
                        container.appendChild(examCard);
                    });
                }
                showScreen('chapterExamsScreen');
            }

            // ====== Core Quiz Functions (Adapted from your existing logic) ======

            window.startExam = function(quizDataLink, examTitle) {
                const quizQuestions = window[quizDataLink];

                if (!quizQuestions || quizQuestions.length === 0) {
                    alert('عذراً، لا توجد أسئلة لهذا الاختبار حاليًا.');
                    showScreen('examScreen');
                    return;
                }

                activeQuestions = quizQuestions;
                document.getElementById('quizTitle').textContent = examTitle;
                currentQuestionIndex = 0;
                userAnswers = new Array(activeQuestions.length).fill(null);
                timeLeft = 60 * 5; // Default 5 minutes, can be customized per exam data if needed
                clearInterval(timerInterval);
                startTimer();
                loadQuestion();
                showScreen('quizScreen');
            }

            function startTimer() {
                const timerElement = document.getElementById('timeLeft');
                timerInterval = setInterval(() => {
                    let minutes = Math.floor(timeLeft / 60);
                    let seconds = timeLeft % 60;
                    timerElement.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;

                    if (timeLeft <= 0) {
                        clearInterval(timerInterval);
                        alert('انتهى الوقت!');
                        showResultScreen();
                    }
                    timeLeft--;
                }, 1000);
            }

            window.loadQuestion = function() {
                if (currentQuestionIndex >= activeQuestions.length || currentQuestionIndex < 0) {
                    showResultScreen();
                    return;
                }

                const question = activeQuestions[currentQuestionIndex];
                document.getElementById('questionText').textContent = question.question;
                document.getElementById('currentQuestionNumber').textContent = currentQuestionIndex + 1;
                document.getElementById('totalQuestions').textContent = activeQuestions.length;

                const optionsContainer = document.getElementById('optionsContainer');
                optionsContainer.innerHTML = '';

                question.options.forEach((option, index) => {
                    const button = document.createElement('button');
                    button.className = 'option-button';
                    button.textContent = option;
                    button.onclick = () => selectOption(index);
                    optionsContainer.appendChild(button);

                    if (userAnswers[currentQuestionIndex] === index) {
                        button.classList.add('selected');
                    }
                });

                updateNavButtons();
            }

            function selectOption(selectedIndex) {
                userAnswers[currentQuestionIndex] = selectedIndex;
                loadQuestion(); // Reload to update selected state
            }

            window.prevQuestion = function() {
                if (currentQuestionIndex > 0) {
                    currentQuestionIndex--;
                    loadQuestion();
                }
            }

            window.nextQuestion = function() {
                if (currentQuestionIndex < activeQuestions.length - 1) {
                    currentQuestionIndex++;
                    loadQuestion();
                } else {
                    // If it's the last question and 'Next' is clicked, finish the exam
                    showResultScreen();
                }
            }

            function updateNavButtons() {
                document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
                document.getElementById('nextBtn').disabled = currentQuestionIndex === activeQuestions.length - 1;
                document.getElementById('finishBtn').style.display = (currentQuestionIndex === activeQuestions.length - 1 || userAnswers.every(answer => answer !== null)) ? 'inline-block' : 'inline-block'; // Always show finish for now
            }

            window.showResultScreen = function() {
                clearInterval(timerInterval); // Stop the timer

                let correctCount = 0;
                let wrongCount = 0;
                let skippedCount = 0;

                const reviewQuestionsContainer = document.getElementById('reviewQuestionsContainer');
                reviewQuestionsContainer.innerHTML = '';

                activeQuestions.forEach((question, index) => {
                    const userAnswerIndex = userAnswers[index];
                    const isCorrect = question.options[userAnswerIndex] === question.answer;

                    const reviewItem = document.createElement('div');
                    reviewItem.className = 'review-item';

                    reviewItem.innerHTML = `
                        <h4>السؤال ${index + 1}: ${question.question}</h4>
                        <div class="options-review"></div>
                        <div class="explanation">
                            <strong>الشرح:</strong> ${question.explanation}
                        </div>
                    `;

                    const optionsReviewDiv = reviewItem.querySelector('.options-review');
                    question.options.forEach((option, optIndex) => {
                        const optionDiv = document.createElement('div');
                        optionDiv.textContent = option;
                        if (option === question.answer) {
                            optionDiv.classList.add('correct');
                        }
                        if (userAnswerIndex === optIndex && !isCorrect) {
                            optionDiv.classList.add('wrong');
                        }
                        if (userAnswerIndex === optIndex && isCorrect) {
                             // If user answered correctly, the option is already green from 'correct' class
                        }
                        optionsReviewDiv.appendChild(optionDiv);
                    });

                    if (userAnswerIndex === null) {
                        skippedCount++;
                    } else if (isCorrect) {
                        correctCount++;
                    } else {
                        wrongCount++;
                    }
                    reviewQuestionsContainer.appendChild(reviewItem);
                });

                document.getElementById('correctAnswers').textContent = correctCount;
                document.getElementById('wrongAnswers').textContent = wrongCount;
                document.getElementById('skippedAnswers').textContent = skippedCount;

                showScreen('resultScreen');
            }

            // Initial load for exam subjects when the page loads
            loadExamSubjects();
            // Initially show the main screen. You can change this to 'examScreen' if you want to start there.
            showScreen('mainScreen');
        });
        // JavaScript Code - End
    </script>
</body>
</html>

